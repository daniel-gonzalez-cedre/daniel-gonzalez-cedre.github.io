\input{preamble.tex}
\input{environments.tex}
\input{definitions.tex}

\begin{document}

\title{Discrete Mathematics}
\author{Daniel Gonzalez Cedre}
\date{University of Notre Dame \\ Spring of 2023}
\maketitle

\setcounter{chapter}{6}
\chapter{Number Theory}

\section{Ancient Greece}

\begin{definition}[Divisibility]
    Given two integers $a, b \in \Z$,
    we say $a \div b$ \iffbydefn $\pn*{\exists k \in \Z}\pn*{ak = b}$.
    We read $a \div b$ as \emph{$a$ divides $b$}, meaning $\sfrac{b}{a} \in \Z$.
\end{definition}

\begin{lemma}[Initial object]
    If $x \in \Z$, then $1 \div x$.
\end{lemma}
\begin{proof}
    Let $x \in \Z$ and observe that $1 \cdot x = x$.
    Therefore, $1 \div x$ by definition.
\end{proof}

\begin{lemma}[Terminal object]
    If $x \in \Z$, then $x \div 0$.
\end{lemma}
\begin{proof}
    Let $x \in \Z$ and observe that $0 \cdot x = 0$.
    Therefore, $x \div 0$ by definition.
\end{proof}

\begin{lemma}[Divisibility is a Partial Order]\label{lem:divpartial}
    The following statements hold for all $a, b, c \in \Z$:
    \begin{enumerate}
        \item[\textsc{i}.]
            $a \div a$
            \begin{proof}
                Let $a \in \Z$ and observe that $1 \cdot a = a$.
                Therefore, $a \div a$ by definition.
            \end{proof}
        \item[\textsc{ii}.]
            $\pn*{\pn*{a \div b} \meet \pn*{b \div a}} \implies \abs{a} = \abs{b}$
            \begin{proof}
                Let $a, b \in Z$ and suppose $a \div b$ and $b \div a$.
                Then, there exist $k_1, k_2 \in \Z$ such that $ak_1 = b$ and $bk_2 = a$ by definition.
                But then $bk_2 = \pn*{ak_1}k_2 = a$, so $ak_1k_2 = a$, yielding $k_1k_2 = 1$.
                Since the only integers with multiplicative inverses are $1$ and $-1$,
                we have $\set*{k_1, k_2} \subseteq \set*{1, -1}$,
                so $a = b$ or $a = -b$.
                Thus, $\abs{a} = \abs{b}$.
            \end{proof}
        \item[\textsc{iii}.]
            $\pn*{\pn*{a \div b} \meet \pn*{b \div c}} \implies a \div c$
            \begin{proof}
                Let $a, b, c \in Z$ and suppose $a \div b$ and $b \div c$.
                Then, there exist $k_1, k_2 \in \Z$ such that $ak_1 = b$ and $bk_2 = c$.
                This yields $ak_1k_2 = c$.
                Since $k_1, k_2 \in \Z$,
                we observe $k_1k_2 \in \Z$ and conclude $a \divides c$ by definition.
            \end{proof}
    \end{enumerate}
    \vspace{-2ex}
\end{lemma}

\begin{lemma}[Useful facts]\label{lem:divalgebra}
    The following statements hold for all $a, b, c \in \Z$:
    \begin{enumerate}
        \item[\textsc{i}.]
            $\pn*{\pn*{a \div b} \meet \pn*{a \div c}} \implies a \div b + c$
        \item[\textsc{ii}.]
            $a \div b \implies \pn*{\forall \ell \in \Z}\pn*{a \div b\ell}$
        \item[\textsc{iii}.]
            $\pn*{\pn*{a \div b} \meet \pn*{b \neq 0}} \implies \abs{a} \leq \abs{b}$
    \end{enumerate}
    The proofs of the above lemmata are left as exercises to the reader.
\end{lemma}

\begin{corollary}
    Given $a, b, c \in \Z$, if $a \div b$ and $a \div c$,
    then $\pn*{\forall \ell_1, \ell_2 \in \Z}\pn*{a \div \ell_1b + \ell_2c}$.
\end{corollary}
% \begin{proof}
%     Let $a, b, c \in \Z$ and suppose $a \div b$ and $a \div c$.
%     Let $\ell_1, \ell_2 \in \Z$.
%     From \autoref{lem:divalgebra}, we know $a \div b\ell_1$ and $a \div c\ell_2$,
%     implying $a \div b\ell_1 + c\ell_2$ by \autoref{lem:divalgebra}.
% \end{proof}

\begin{definition}[Primality]
    We say that a natural number $p \in \N$ is \emph{prime} \iffbydefn 
    $(p > 1)$ and $\pn*{\forall n \in \N}\pn*{n \div p \implies n \in \set*{1, p}}$.\\
    We say $n \in \N$ is \emph{composite} \iffbydefn $n$ is not prime.
\end{definition}

\begin{lemma}[Fundamental Lemma of Arithmetic]
    If $n \in \N$ and $n > 1$, then $\pn*{\exists p \in \N}\pn*{p \text{ is prime} \meet p \div n}$.
\end{lemma}
\begin{proof}
    \hl{TODO}
\end{proof}

\begin{theorem}[Fundamental Theorem of Arithmetic]
    Every natural number greater than $1$ has a \emph{unique} prime factorization.
    Formally, for every natural number $n \in \N_{\geq 2}$ greater than $1$,
    there exist \emph{unique, distinct} primes $p_1, \dots p_\ell \in \N_+$
    with \emph{unique} exponents $k_1, \dots k_\ell \in \N_+$ such that
    % $\pn*{\forall n \in \N_{\geq 2}}$
    % $\pn*{\exists! \ell \in \N_+}$
    % $\pn*{\exists! p_1, \dots p_\ell \in \N_+}$
    % $\pn*{\exists! k_1, \dots k_\ell \in \N_+}$
    \begin{enumerate}
        \item[\textsc{i.}]
            $\pn*{\forall i, j \in \set*{1, \dots \ell}}\pn*{i \neq j \implies p_i \neq p_j}$
        \item[\textsc{ii.}]
            $\pn*{\forall i \in \set*{1, \dots \ell}}\pn*{p_i \text{ is prime}}$
        \item[\textsc{iii.}]
            $n = p_1^{k_1} p_2^{k_2} \dots p_\ell^{k_\ell}$.
    \end{enumerate}
    % \[
    %     \pn*{%
    %         \pn*{\forall i, j \in \set*{1, \dots \ell}}\pn*{i \neq j \implies p_i \neq p_j}
    %         ~~\meet~~ \pn*{\forall i \in \set*{1, \dots \ell}}\pn*{p_i \text{ is prime}}
    %         ~~\meet~~ n = \prod_{i = 1}^{\ell}p_i^{k_i}
    %     }.
    % \]
\end{theorem}

\begin{theorem}[Euclid's Theorem]
    There are infinitely-many prime numbers.
\end{theorem}
\begin{proof}
    \hl{TODO}
\end{proof}

\begin{definition}[Greatest Common Divisor]
    Given two integers $a, b \in \Z$,
    we say that $g \in \Z$ is the \emph{greatest common divisor}
    (\aka \emph{greatest common factor})
    of $a$ and $b$ \iffbydefn
    \[
        \pn*{g \div a} \meet \pn*{g \div b} \meet
        \pn*{\forall h \in \Z}\pn*{\pn*{\pn*{h \div a} \meet \pn*{h \div b}} \implies h \div g}.
    \]
    Notice that, since $\pn*{\forall x}\pn*{1 \div x}$,
    every pair of integers shares a common factor.
    Since common factors of $a$ and $b$ are bounded above by $\min\set*{a, b}$,
    that means the set of all common factors of $a$ and $b$ is nonempty and bounded above,
    so it has a maximal element.
    Therefore, the greatest common divisor of any two integers always exists.
\end{definition}

\begin{definition}[Co-Primality]
    We say that two integers $a, b \in \Z$ are \emph{co-prime} \iffbydefn 
    their greatest common divisor is $1$.
\end{definition}

\begin{theorem}[Euclid's Division Theorem]
    If $a, b \in \Z$, then there exist two \emph{unique} integers $q, r \in \Z$ such that
    \[
        a = bq + r
        \text{ and } 0 \leq r < b.
    \]
    Here, $q$ is called the \emph{quotient} when $a$ is divided by $b$,
    and $r$ is the \emph{remainder}, as illustrated by
    $\sfrac{a}{b} = q + \sfrac{r}{b}$.
\end{theorem}

\begin{algorithm}[Euclid's Division Algorithm]\label{alg:division}
    We can find the greatest common divisor of two integers by recursively computing
    % \begin{align*}
    %     \gcd\pn*{a, 0} &\defn a \\
    %     \gcd\pn*{a, b} &\defn \gcd\pn*{b, r}
    %     \begin{aligned}[t]
    %         \text{ where } &a = bq + r\\
    %         \text{ and } &0 \leq r < b\\
    %         \text{ and } &q, r \in \Z.
    %     \end{aligned}
    % \end{align*}
    \begin{align*}
        \gcd\pn*{a, b} \defn 
        \begin{cases}
            a
                &\text{ if } b = 0\\
            \gcd\pn*{b, r}
            \begin{cases}
                    \text{ where } &a = bq + r\\
                    \text{ and } &0 \leq r < b\\
                    \text{ and } &q, r \in \Z.
            \end{cases}
                % \begin{aligned}[t]
                %     \text{ where } &a = bq + r\\
                %     \text{ and } &0 \leq r < b\\
                %     \text{ and } &q, r \in \Z.
                % \end{aligned}
                &\text{ if } b \neq 0
        \end{cases}
    \end{align*}
    This algorithm correctly computes the greatest common divisor of two arbitrary integers.
\end{algorithm}

\newpage

\section{Modular Arithmetic}

\begin{definition}[Modular Congruence]
    Let $m \in \N_+$ and let $x, y \in \Z$.
    We say that $\modulo{x}{y}{m} \iffdefn m \divides x - y$.
    We read the sentence $\congruent{x}{y}{m}$ in English as
    ``$x$ is congruent to $y$ modulo $m$.''
    This expresses the idea that $x$ and $y$ have the \emph{same remainder}
    after division by $m$, as we can see below.
    \begin{align*}
        \begin{rcases}
            x = q_xm + r\\
            y = q_ym + r
        \end{rcases}
            &\iff x - y = \pn*{q_xm + r} - \pn*{q_ym + r} \\
            &\iff x - y = \pn*{q_x - q_y}m + (r - r) \\
            &\iff x - y = \pn*{q_x - q_y}m \\
            &\iff m \divides x - y
    \end{align*}
\end{definition}

\begin{exercise}
    Let $m \in \N_+$ and $w, x, y, z \in \Z$.
    The following are some useful facts about modular congruence.
    \begin{enumerate}
        \item[\textsc{i.}]
            $\modulo{x}{y}{m} \implies \modulo{x + z}{y + z}{m}$.
        \item[\textsc{ii.}]
            $\pn*{\pn*{\modulo{w}{z}{m}} \meet \pn*{\modulo{x}{y}{m}}}
                \implies \modulo{wx}{yz}{m}$.
    \end{enumerate}
\end{exercise}

\begin{theorem}[Modular Congruence is an Equivalence Relation]
    Let $m \in \N_+$ and $x, y, z \in \Z$.
    The following are true.
    \begin{enumerate}
        \item[\textsc{i.}]
            $\modulo{x}{x}{m}$
        \item[\textsc{ii.}]
            $\modulo{x}{y}{m} \implies \modulo{y}{x}{m}$
        \item[\textsc{iii.}]
            $\pn*{\pn*{\modulo{x}{y}{m}} \meet \pn*{\modulo{y}{z}{m}}}
                \implies \modulo{x}{z}{m}$
    \end{enumerate}
\end{theorem}

\begin{definition}[Modular Residue Classes]
    Let $m \in \N_+$ and let $a \in \Z$.
    The set of solutions to the \emph{linear congruence} $\modulo{x}{a}{m}$ is denoted by
    \[
        [a]_m \defn \set*{x \in \Z \suchthat \modulo{x}{a}{m}}.
    \]
    Each of these is known as an \emph{equivalence class} of \emph{residues} modulo $m$,
    indicating that all the integers in that class have remainder congruent to $a$
    after division by $m$.
\end{definition}

\begin{definition}[Modular Rings]
    Let $m \in \N_+$.
    We define the \emph{modular ring} of size $m$
    (\aka the \emph{cyclic group}) of size $m$ by
    % with \emph{modular addition and multiplication} by
    \begin{equation*}
        \faktor{\Z}{m\Z} \defn \set*{[x]_m \suchthat x \in \Z}
    \end{equation*}
    % \begin{align*}
    %     \faktor{\Z}{m\Z} &\defn \set*{[x]_m \suchthat x \in \Z} \\[1ex]
    %     [x]_m + [y]_m &\defn [x + y]_m \\
    %     [x]_m \cdot [y]_m &\defn [xy]_m
    % \end{align*}
    and we define \emph{modular addition}
    % $+: \pn*{\faktor{\Z}{m\Z} \times \faktor{\Z}{m\Z}} \to \faktor{\Z}{m\Z}$
    and \emph{modular multiplication}
    % $\cdot: \pn*{\faktor{\Z}{m\Z} \times \faktor{\Z}{m\Z}} \to \faktor{\Z}{m\Z}$
    on its elements by
    \begin{align*}
        [x]_m + [y]_m &\defn [x + y]_m \\
        [x]_m \cdot [y]_m &\defn [xy]_m.
    \end{align*}
\end{definition}

\begin{theorem}[B\'ezout's Identity]
    Given $x, y \in \Z$, there exist $k_1, k_2 \in \Z$ such that
    \begin{equation*}
        xk_1 + yk_2 = \gcd\pn*{x, y}.
    \end{equation*}
\end{theorem}

\begin{algorithm}[Extended Euclidean Division Algorithm]\label{alg:extdivision}
    We can find the greatest common divisor \emph{and} the B\'ezout coefficients
    of two integers by recursively computing
    \begin{equation*}
        \gcd\pn*{a, b} \defn 
        \begin{cases}
            (a, 1, 0)
                &\text{ if } b = 0\\
            (d, t, s - qt)
                \begin{cases}
                    \text{ where } &(d, s, t) = \text{egcd}\pn*{b, r}\\
                    \text{ and } &a = bq + r\\
                    \text{ and } &0 \leq r < b\\
                    \text{ and } &q, r \in \Z.
                \end{cases}
                % \begin{aligned}[t]
                %     \text{ where } &a = bq + r\\
                %     \text{ and } &0 \leq r < b\\
                %     \text{ and } &q, r \in \Z.
                % \end{aligned}
                &\text{ if } b \neq 0
        \end{cases}
    \end{equation*}
    This algorithm correctly computes the greatest common divisor of two arbitrary integers.
\end{algorithm}

\begin{definition}[Euler's Totient Function]
    We define \emph{Euler's totient function} $\varphi: \N \to \N$ by the number of integers $1 \leq z < n$ relatively prime with $n \in \N$
    \begin{equation*}
        \varphi(n)
        \defn \cardinality*{\set*{z \in \Z \suchthat (1 \leq z < n) \meet \pn*{\gcd\pn*{z, n} > 1}}}
    \end{equation*}
\end{definition}

\begin{lemma}
    If $p \in \N_+$ is prime, then $\varphi(p) = p - 1$.
\end{lemma}

\begin{theorem}\label{thm:totient}
    Let $x, y \in \Z$. If $\gcd\pn*{x, y} = 1$, then $\varphi(xy) = \varphi(x)\varphi(y)$.
\end{theorem}

\begin{theorem}[F\'ermat's Little Theorem]
    Let $p \in \N_+$ be prime and $a \in \Z$.
    Then, $\modulo{a^p}{p}{p}$.
    Further, if $\gcd\pn*{a, p} = 1$, then $\modulo{a^{p - 1}}{1}{p}$.
\end{theorem}

\begin{theorem}[Euler's Theorem]
    Let $n \in \N_+$  and $a \in \Z$.
    If $\gcd\pn*{a, n} = 1$, then
    \[
        \modulo{a^{\varphi(n)}}{1}{n}.
    \]
\end{theorem}

\begin{algorithm}[RSA Encryption]
    The RSA\footnote{Named after Rivest, Shamir, and Adleman, the three coauthors of the original $1977$ paper.} cryptosystem is an algorithm for performing \emph{asymmetric} (\aka \emph{public key}) encryption.
    Its security is reliant on two key observations:
    \begin{enumerate}
        \item[\textsc{i.}]
            It takes roughly $e^{\pn*{\sqrt[3]{\sfrac{64}{9}}}\pn*{\ln{n}}^{\sfrac{1}{3}}\pn*{\ln{\ln{n}}}^{\sfrac{2}{3}}}$ time to factor $n \in \N$ into a product of primes.
        \item[\textsc{ii.}]
            There is no known way of finding the $k$\textsuperscript{th} root of $x$ in $\faktor{\Z}{n\Z}$ faster than by factoring $n$.
    \end{enumerate}

    The algorithm has two stages,
    with \textcolor{colororange}{\bfseries private} information that must be kept \textcolor{colororange}{\bfseries secret} or \textcolor{colororange}{\bfseries destroyed},
    and \textcolor{colorteal}{\bfseries public} information that is shared through \textcolor{colorteal}{\bfseries insecure channels}.

    \textbf{Key Generation}
    \begin{enumerate}
        \item
            Pick two (large) prime numbers $\color{colororange}\bm{p}$ and $\color{colororange}\bm{q}$.
            Compute ${\color{colorteal}\bm{n}} \defn pq$.
        \item
            Compute ${\color{colororange}\bm{\varphi(n)}} = \varphi(pq) = \varphi(p)\varphi(q) = (p - 1)(q - 1)$ using \autoref{thm:totient}.
        \item
            Pick a random number $\color{colorteal}\bm{e}$ in the range $1 < e < \varphi(n)$ relatively prime with $\varphi(n)$.
        \item
            When checking that $\gcd\pn*{e, \varphi\pn*{n}} = 1$ in the previous step,
            use the \emph{Extended Euclidean Algorithm} from \autoref{alg:extdivision}
            to simultaneously obtain $\color{colororange}\bm{d}$ satisfying
            $\modulo{ed}{1}{\varphi(n)}$.
        \item
            Publish $(e, n)$ publicly while keeping $(d, n)$ secret.
    \end{enumerate}

    The
    \textcolor{colorteal}{\bfseries public encryption key} is the pair
    $\pn*{{\color{colorteal}\bm{e}}, {\color{colorteal}\bm{n}}}$,
    and the \textcolor{colororange}{\bfseries private decryption key} is the pair
    $\pn*{{\color{colororange}\bm{d}}, {\color{colorteal}\bm{n}}}$.
    All other \textcolor{colororange}{\bfseries private} information
    should be immediately \emph{destroyed} for security.

\newpage
    \textbf{Message Passing: Encryption}
    \begin{enumerate}
        \item
            Your friend takes a message $\color{colororange}\bm{m}$,
            which is a (binary) number,
            and---treating it like a string---chops it up into substrings
            $m = {\color{colororange}\bm{m_0}\bm{m_1}} \dots {\color{colororange}\bm{m_k}}$
            so that each is in the range $0 < m_i < n$ and $\gcd\pn*{m_i, n} = 1$.
        \item
            For each sub-message $m_i$,
            your friend computes the encrypted sub-message $\color{colorteal}\bm{c_i}$ by
            $\modulo{c_i}{m_i^e}{n}$, where $0 < c_i < n$.
        \item
            He then sends $c_i$ over an insecure channel to you.
    \end{enumerate}
    \textbf{Message Passing: Decryption}
    \begin{enumerate}
        \item
            Receive $c_i$, which has possibly been intercepted by other parties.
        \item
            Decrypt the encrypted message with your private key by computing
            $\modulo{m_i}{c_i^d}{n}$ such that $0 < m_i < n$.
    \end{enumerate}
\end{algorithm}


\appendix

\chapter{The Algebra of Modular Arithmetic}

\begin{definition}[Some Basic Algebra]
    Suppose we have a set $G$ with a binary operation on $\Plus: G \times G \to G$ defined on it.
    We say this is a \emph{monoid} if there exists an \emph{identity element} $e_0$
    such that
    \begin{enumerate}
        \item[\textsc{i.}]
            $\pn*{\forall g \in G}\pn*{e_0 \Plus g = g \Plus e_0 = g}$
        \item[\textsc{ii.}]
            $\pn*{\forall g, h, k \in G}\pn*{g \Plus \pn*{h \Plus k} = \pn*{g \Plus h} \Plus k}$
    \end{enumerate}
    We call $G$ under $\Plus$ a \emph{group} if we also have
    \begin{enumerate}
        \item[\textsc{iii.}]
            $\pn*{\forall g \in G}\pn*{\exists h \in G}\pn*{g \Plus h = e_0}$
    \end{enumerate}
    We call $G$ a \emph{commutative} group\footnote{Usually referred to as an \emph{Abelian group}, after Niels Henrik Abel.} if we additionally have
    \begin{enumerate}
        \item[\textsc{iv.}]
            $\pn*{\forall g, h \in G}\pn*{g \Plus h = h \Plus g}$
    \end{enumerate}
    If we then define another binary operation $\bullet: G \times G \to G$,
    then we call $G$ with these two operations a \emph{ring}
    if we can find another identity element $e_1 \in G$ such that
    \begin{enumerate}
        \item[\textsc{v.}]
            $G$ is a monoid under $\bullet$ with identity $e_1$
        \item[\textsc{vi.}]
            $\pn*{\forall g, h, k \in G}\pn*{g \bullet \pn*{h \Plus k} = \pn*{g \bullet h} \Plus \pn*{g \bullet k}}$
        \item[\textsc{vii.}]
            $\pn*{\forall g, h, k \in G}\pn*{\pn*{g \Plus h} \bullet k = \pn*{g \bullet k} \Plus \pn*{h \bullet k}}$
    \end{enumerate}
    Finally, we say that $G$ is a \emph{field} if we also have
    \begin{enumerate}
        \item[\textsc{viii.}]
            $\pn*{\forall g \in G}\pn*{g \neq e_0 \implies \pn*{\exists h \in G}\pn*{g \bullet h = e_1}}$
    \end{enumerate}
\end{definition}

\begin{lemma}
    $G$ with $\Plus$ and $\bullet$ is a field \ifandonlyif
    $G$ with $\Plus$ is a group and
    $G \setminus \set*{e_0}$ with $\bullet$ is a group.
\end{lemma}

\begin{theorem}
    If $n \in \N_+$, then $\faktor{\Z}{n\Z}$ forms a ring under modular arithmetic.\\
    If $n \in \N_+$, then $\faktor{\Z}{n\Z}$ forms a field under modular arithmetic \ifandonlyif $n$ is prime.
\end{theorem}

\begin{definition}[Order]
    The \emph{order $\order{G}$} of a group $G$ is its cardinality.
    The \emph{order $\order{g}$} of $g \in G$
    is the smallest $n \in \N$ such that $g^{n + 1} = e$.
\end{definition}

\begin{theorem}
    For any group $G$ and any $g \in G$, we have that $\order{g}$ divides $\order{G}$.
\end{theorem}

% \lightning

\end{document}
